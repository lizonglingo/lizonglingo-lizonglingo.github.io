<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='ÊúÄËøë‰∫ãÊÉÖÊØîËæÉÂ§öÔºåËøô‰∏ÄÁØáÁé∞Âú®ÊâçÊõ¥„ÄÇÂèàÂºÄÂßãÂøôËµ∑Êù•‰∫Ü~Âú®Êú¨ÁØáÊñáÁ´†ÊâÄÊ∂âÂèäÂà∞ÁöÑ‰ª£Á†ÅÂÆûÁé∞‰∏≠ÔºåÂ§ßÈÉ®ÂàÜÊîπÂä®Áõ∏ÊØî‰πãÂâçÁöÑÂú®Êù°ÁêÜÂíåÈÄªËæë‰∏äÊõ¥Âä†Ê∏ÖÊô∞„ÄÇ ÂºïË®Ä Âú®Êú¨Á≥ªÂàóÊñáÁ´†'>
<title>‰ΩøÁî®GolangÊûÑÂª∫Âå∫ÂùóÈìæPart6Ôºö‰∫§Êòì-2</title>

<link rel='canonical' href='https://lizonglingo.github.io/p/%E4%BD%BF%E7%94%A8golang%E6%9E%84%E5%BB%BA%E5%8C%BA%E5%9D%97%E9%93%BEpart6%E4%BA%A4%E6%98%93-2/'>

<link rel="stylesheet" href="/scss/style.min.8191399262444ab68b72a18c97392f5349be20a1615d77445be51e974c144cff.css"><meta property='og:title' content='‰ΩøÁî®GolangÊûÑÂª∫Âå∫ÂùóÈìæPart6Ôºö‰∫§Êòì-2'>
<meta property='og:description' content='ÊúÄËøë‰∫ãÊÉÖÊØîËæÉÂ§öÔºåËøô‰∏ÄÁØáÁé∞Âú®ÊâçÊõ¥„ÄÇÂèàÂºÄÂßãÂøôËµ∑Êù•‰∫Ü~Âú®Êú¨ÁØáÊñáÁ´†ÊâÄÊ∂âÂèäÂà∞ÁöÑ‰ª£Á†ÅÂÆûÁé∞‰∏≠ÔºåÂ§ßÈÉ®ÂàÜÊîπÂä®Áõ∏ÊØî‰πãÂâçÁöÑÂú®Êù°ÁêÜÂíåÈÄªËæë‰∏äÊõ¥Âä†Ê∏ÖÊô∞„ÄÇ ÂºïË®Ä Âú®Êú¨Á≥ªÂàóÊñáÁ´†'>
<meta property='og:url' content='https://lizonglingo.github.io/p/%E4%BD%BF%E7%94%A8golang%E6%9E%84%E5%BB%BA%E5%8C%BA%E5%9D%97%E9%93%BEpart6%E4%BA%A4%E6%98%93-2/'>
<meta property='og:site_name' content='Li Duo'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Golang' /><meta property='article:tag' content='Âå∫ÂùóÈìæ' /><meta property='article:published_time' content='2019-09-17T12:35:12&#43;08:00'/><meta property='article:modified_time' content='2019-09-17T12:35:12&#43;08:00'/>
<meta name="twitter:title" content="‰ΩøÁî®GolangÊûÑÂª∫Âå∫ÂùóÈìæPart6Ôºö‰∫§Êòì-2">
<meta name="twitter:description" content="ÊúÄËøë‰∫ãÊÉÖÊØîËæÉÂ§öÔºåËøô‰∏ÄÁØáÁé∞Âú®ÊâçÊõ¥„ÄÇÂèàÂºÄÂßãÂøôËµ∑Êù•‰∫Ü~Âú®Êú¨ÁØáÊñáÁ´†ÊâÄÊ∂âÂèäÂà∞ÁöÑ‰ª£Á†ÅÂÆûÁé∞‰∏≠ÔºåÂ§ßÈÉ®ÂàÜÊîπÂä®Áõ∏ÊØî‰πãÂâçÁöÑÂú®Êù°ÁêÜÂíåÈÄªËæë‰∏äÊõ¥Âä†Ê∏ÖÊô∞„ÄÇ ÂºïË®Ä Âú®Êú¨Á≥ªÂàóÊñáÁ´†">
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_huda2458f72ce188392d75c5d51cd8e24e_373_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üëã</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Li Duo</a></h1>
            <h2 class="site-description">Â≠êÊ†áÈ¢ò</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/CaiJimmy/hugo-theme-stack'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>‰∏ªÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>ÂÖ≥‰∫é</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>ÂΩíÊ°£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>ÊêúÁ¥¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E9%93%BE%E6%8E%A5/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>ÈìæÊé•</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>ÊöóËâ≤Ê®°Âºè</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                <form action="/search/" class="search-form widget" >
        <p>
            <label>ÊêúÁ¥¢</label>
            <input name="keyword" required placeholder="ËæìÂÖ•ÂÖ≥ÈîÆËØç..." />
        
            <button title="ÊêúÁ¥¢">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



            </button>
        </p>
    </form>
            
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#ÂºïË®Ä">ÂºïË®Ä</a></li>
    <li><a href="#Â•ñÂä±">Â•ñÂä±</a></li>
    <li><a href="#utxo-ÈõÜÂêà">UTXO ÈõÜÂêà</a></li>
    <li><a href="#merkle-treeÈªòÂÖãÂ∞îÊ†ë">Merkle TreeÔºàÈªòÂÖãÂ∞îÊ†ëÔºâ</a></li>
    <li><a href="#p2kh">P2KH</a></li>
    <li><a href="#ÊÄªÁªì">ÊÄªÁªì</a></li>
  </ul>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/golang/" >
                Golang
            </a>
        
            <a href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/" >
                Âå∫ÂùóÈìæ
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/%E4%BD%BF%E7%94%A8golang%E6%9E%84%E5%BB%BA%E5%8C%BA%E5%9D%97%E9%93%BEpart6%E4%BA%A4%E6%98%93-2/">‰ΩøÁî®GolangÊûÑÂª∫Âå∫ÂùóÈìæPart6Ôºö‰∫§Êòì-2</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Sep 17, 2019</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    ÈòÖËØªÊó∂Èïø: 12 ÂàÜÈíü
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <blockquote>
<p>ÊúÄËøë‰∫ãÊÉÖÊØîËæÉÂ§öÔºåËøô‰∏ÄÁØáÁé∞Âú®ÊâçÊõ¥„ÄÇÂèàÂºÄÂßãÂøôËµ∑Êù•‰∫Ü~Âú®Êú¨ÁØáÊñáÁ´†ÊâÄÊ∂âÂèäÂà∞ÁöÑ‰ª£Á†ÅÂÆûÁé∞‰∏≠ÔºåÂ§ßÈÉ®ÂàÜÊîπÂä®Áõ∏ÊØî‰πãÂâçÁöÑÂú®Êù°ÁêÜÂíåÈÄªËæë‰∏äÊõ¥Âä†Ê∏ÖÊô∞„ÄÇ</p>
</blockquote>
<h2 id="ÂºïË®Ä">ÂºïË®Ä</h2>
<p>Âú®Êú¨Á≥ªÂàóÊñáÁ´†‰∏≠ÁöÑÊúÄÂºÄÂßãÔºåÊàëËØ¥ËøáÂå∫ÂùóÈìæÊòØ‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÊï∞ÊçÆÂ∫ì„ÄÇÈÇ£Êó∂ÔºåÊàë‰ª¨ÂÜ≥ÂÆöÂÖàË∑≥Ëøá‚ÄúÂàÜÂ∏ÉÂºè‚ÄùÁöÑÈÉ®ÂàÜËÄåÊääÁ≤æÂäõÊîæÂà∞‚ÄúÊï∞ÊçÆÂ∫ì‚ÄùÁõ∏ÂÖ≥ÁöÑÂÜÖÂÆπ„ÄÇ‰∏ç‰πÖ‰πãÂâçÔºåÊàë‰ª¨Âá†‰πéÂ∑≤ÁªèÂÆûÁé∞‰∫ÜÊâÄÊúâÁöÑÂÖ≥‰∫éÊï∞ÊçÆÂ∫ìÈÉ®ÂàÜÁöÑÂÜÖÂÆπ„ÄÇÂú®ËøôÁØáÊñáÁ´†‰∏≠Ôºå‰ºöË¶ÜÁõñÂà∞ÂÖàÂâçÊàë‰ª¨Ë∑≥ËøáÁöÑ‰∏Ä‰∫õÊú∫Âà∂ÔºåÂêåÊó∂Âú®‰∏ã‰∏ÄÁØáÊñáÁ´†‰∏≠ÔºåÊàë‰ª¨‰ºöÂºÄÂßãÁùÄÊâã‰∫éÂå∫ÂùóÈìæÁöÑÂàÜÂ∏ÉÂºèÁâπÊÄß„ÄÇ</p>
<p>ÂÖàÂâçÁöÑÁ´†ËäÇÔºö</p>
<ol>
<li><a class="link" href="https://jeiwan.cc/posts/building-blockchain-in-go-part-1/"  target="_blank" rel="noopener"
    >Basic Prototype</a></li>
<li><a class="link" href="https://jeiwan.cc/posts/building-blockchain-in-go-part-2/"  target="_blank" rel="noopener"
    >Proof-of-Work</a></li>
<li><a class="link" href="https://jeiwan.cc/posts/building-blockchain-in-go-part-3/"  target="_blank" rel="noopener"
    >Persistence and CLI</a></li>
<li><a class="link" href="https://jeiwan.cc/posts/building-blockchain-in-go-part-4/"  target="_blank" rel="noopener"
    >Transactions 1</a></li>
<li><a class="link" href="https://jeiwan.cc/posts/building-blockchain-in-go-part-5/"  target="_blank" rel="noopener"
    >Addresses</a></li>
</ol>
<p>ÔºàÂéüÊñáÂú∞ÂùÄÂèØËÉΩÊó†Ê≥ïËÆøÈóÆÔºâ</p>
<blockquote>
<p>Êú¨ÈÉ®ÂàÜÂè™‰ªãÁªçÊúâÈáçÂ§ßÂèòÂåñÁöÑ‰ª£Á†ÅÔºåÊâÄ‰ª•Âú®ËøôÈáåÂ∞ÜÂÆÉ‰ª¨ÂÖ®ÈÉ®ËøõË°åËß£ÈáäÊòØÊ≤°ÊúâÂøÖË¶ÅÁöÑ„ÄÇËØ∑Ê†πÊçÆ<a class="link" href="https://github.com/Jeiwan/blockchain_go/compare/part_5...part_6#files_bucket"  target="_blank" rel="noopener"
    >Ëøô‰∏™È°µÈù¢</a>ÂéªÁúã‰ª£Á†ÅÁöÑÂèòÂä®Ôºà‰∏é‰∏ä‰∏ÄÁØáÊñáÁ´†ÊØîËæÉÔºâ„ÄÇ</p>
</blockquote>
<h2 id="Â•ñÂä±">Â•ñÂä±</h2>
<p>Âú®ÂÖàÂâçÁöÑÊñáÁ´†‰∏≠ÔºåÊàë‰ª¨Ë∑≥Ëøá‰∫Ü‰∏Ä‰∏™ÂæàÁªÜÂæÆÁöÑÁªÜËäÇÂ∞±ÊòØÊåñÁüøÂ•ñÂä±„ÄÇÁé∞Âú®Êàë‰ª¨ÂÖ∑Êúâ‰∫ÜÂÆûÁé∞ÂÆÉÁöÑ‰∏ÄÂàá„ÄÇ</p>
<p>Ëøô‰∏™Â•ñÂä±ÊòØ‰ªÖ‰ªÖÊòØ‰∏Ä‰∏™<code>coinbase</code>‰∫§Êòì„ÄÇÂΩì‰∏Ä‰∏™ÊåñÁüøËäÇÁÇπÂºÄÂßãÊåñ‰∏Ä‰∏™Êñ∞ÁöÑÂå∫ÂùóÊó∂ÔºåÂÆÉÊî∂ÈõÜÈòüÂàó‰∏≠ÁöÑ‰∫§ÊòìÂêåÊó∂‰∏∫ÂÆÉ‰ª¨ÂáÜÂ§á‰∏Ä‰∏™<code>coinbase</code>‰∫§Êòì„ÄÇËøô‰∏™<code>coinbase</code>‰∫§Êòì‰ªÖ‰ªÖÂåÖÂê´‰∏Ä‰∏™ÁüøÂ∑•ÂÖ¨Èí•ÂìàÂ∏åÁöÑËæìÂá∫„ÄÇ</p>
<p>ÂÆûÁé∞Â•ñÂä±ÂíåÊõ¥Êñ∞<code>send</code>ÂëΩ‰ª§‰∏ÄÊ†∑ÁÆÄÂçïÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">cli</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">CLI</span>) <span style="color:#a6e22e">send</span>(<span style="color:#a6e22e">from</span>, <span style="color:#a6e22e">to</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">amount</span> <span style="color:#66d9ef">int</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">bc</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewBlockchain</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">UTXOSet</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">UTXOSet</span>{<span style="color:#a6e22e">bc</span>}
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">bc</span>.<span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">Close</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tx</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewUTXOTransaction</span>(<span style="color:#a6e22e">from</span>, <span style="color:#a6e22e">to</span>, <span style="color:#a6e22e">amount</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">UTXOSet</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">cbTx</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewCoinbaseTX</span>(<span style="color:#a6e22e">from</span>, <span style="color:#e6db74">&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">txs</span> <span style="color:#f92672">:=</span> []<span style="color:#f92672">*</span><span style="color:#a6e22e">Transaction</span>{<span style="color:#a6e22e">cbTx</span>, <span style="color:#a6e22e">tx</span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">newBlock</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">bc</span>.<span style="color:#a6e22e">MineBlock</span>(<span style="color:#a6e22e">txs</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Success!&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Âú®Êàë‰ª¨ÁöÑÂÆûÁé∞‰∏≠ÔºåÂàõÂª∫‰∫§ÊòìÊåñÂá∫Êñ∞ÂùóÁöÑÈÇ£‰∏Ä‰∏™ÔºàÁüøÂ∑•Ôºâ‰ºöËé∑ÂæóÂ•ñÂä±„ÄÇ</p>
<h2 id="utxo-ÈõÜÂêà">UTXO ÈõÜÂêà</h2>
<p>Âú®Á¨¨‰∏âÈÉ®ÂàÜ<a class="link" href="https://jeiwan.cc/posts/building-blockchain-in-go-part-3/"  target="_blank" rel="noopener"
    >ÊåÅ‰πÖÂåñÂíåÂëΩ‰ª§Ë°åÊé•Âè£</a>‰∏≠ÔºåÊàë‰ª¨Â≠¶‰π†‰∫ÜÊØîÁâπÂ∏ÅÂÜÖÊ†∏Â∞ÜÂå∫ÂùóÂ≠òÂÇ®Âà∞Êï∞ÊçÆÂ∫ìÁöÑÊñπÂºè„ÄÇÂÆÉËÆ≤Âà∞Âå∫ÂùóÈÉΩÊòØÂ≠òÂÇ®Âú®<code>blocks</code>Êï∞ÊçÆÂ∫ìÁöÑÔºå‰∫§ÊòìÂá∫Ë¥¶ÊòØÂ≠òÂÇ®Âú®<code>chainstate</code>Êï∞ÊçÆÂ∫ìÁöÑ„ÄÇËÆ©ÊàëÊèêÈÜí‰Ω†‰∏Ä‰∏ã<code>chainstate</code>ÁöÑÁªìÊûÑÊòØ‰ªÄ‰πàÊ†∑ÁöÑÔºö</p>
<ol>
<li>&lsquo;c&rsquo; + 32‰Ωç‰∫§ÊòìÂìàÂ∏å -&gt; ‰∫§ÊòìÁöÑÊú™Ëä±Ë¥π‰∫§ÊòìËæìÂá∫ËÆ∞ÂΩï</li>
<li>&lsquo;B&rsquo; + 32‰ΩçÂå∫ÂùóÂìàÂ∏å -&gt; Êï∞ÊçÆÂ∫ì‰∏≠‰ª£Ë°®Êú™Ëä±Ë¥π‰∫§ÊòìËæìÂá∫ÁöÑÂå∫ÂùóÂìàÂ∏å</li>
</ol>
<p>Ëá≥Ëøô‰∏ÄÁØáÊñáÁ´†ÔºåÊàë‰ª¨Â∑≤ÁªèÂÆûÁé∞‰∫Ü‰∫§ÊòìÔºå‰ΩÜÊòØÊàë‰ª¨Âπ∂Ê≤°ÊúâÂéª‰ΩøÁî®<code>chainstate</code>ÂéªÂ≠òÂÇ®ÂÆÉ‰ª¨ÁöÑËæìÂá∫„ÄÇÊâÄ‰ª•ÔºåËøôÂ∞±ÊòØÊàë‰ª¨Áé∞Âú®Ë¶ÅÂéªÂÅöÁöÑ„ÄÇ</p>
<p><code>chainstate</code>‰∏ç‰ºöÂéªÂ≠òÂÇ®‰∫§Êòì„ÄÇÂèñËÄå‰ª£‰πãÁöÑÔºåÂÆÉÂ≠òÂÇ®‰∏Ä‰∏™Âè´UTXOÁöÑÈõÜÂêàÔºåÊàñËÄÖËØ¥ÊòØÊú™Ëä±Ë¥π‰∫§ÊòìËæìÂá∫ÁöÑÈõÜÂêà„ÄÇÈô§Ê≠§‰πãÂ§ñÔºåÂÆÉÂ≠òÂÇ®‰∫Ü‚ÄúÊï∞ÊçÆÂ∫ìË°®Á§∫ÁöÑÊú™Ëä±Ë¥π‰∫§ÊòìËæìÂá∫ÁöÑÂå∫ÂùóÂìàÂ∏å‚ÄùÔºåËøôÂÑøÊàë‰ª¨ÂÖàÊöÇÊó∂ÁúÅÁï•ÔºåÂõ†‰∏∫Êàë‰ª¨ËøòÊ≤°Êúâ‰ΩøÁî®Âå∫ÂùóÈ´òÂ∫¶Ôºà‰ΩÜÊòØÊàë‰ª¨‰ºöÂú®‰∏ã‰∏ÄÁØáÊñáÁ´†‰∏≠ËøõË°åÂÆûÁé∞Ôºâ„ÄÇ</p>
<p>ÊâÄ‰ª•Ôºå‰∏∫‰ªÄ‰πàÊàëË¶ÅÂéªÂÆûÁé∞UTXOÈõÜÂêàÂë¢Ôºü</p>
<p>ËÄÉËôëÂà∞Êàë‰ª¨ÂÖàÂâçÂÆûÁé∞ÁöÑ<code>Blockchain.FindUnspentTransactions</code>ÊñπÊ≥ïÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">bc</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Blockchain</span>) <span style="color:#a6e22e">FindUnspentTransactions</span>(<span style="color:#a6e22e">pubKeyHash</span> []<span style="color:#66d9ef">byte</span>) []<span style="color:#a6e22e">Transaction</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">bci</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">bc</span>.<span style="color:#a6e22e">Iterator</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">block</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">bci</span>.<span style="color:#a6e22e">Next</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">tx</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">block</span>.<span style="color:#a6e22e">Transactions</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">block</span>.<span style="color:#a6e22e">PrevBlockHash</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Ëøô‰∏™ÂáΩÊï∞ÂØªÊâæËøòÊúâÊú™Ëä±Ë¥πËæìÂá∫ÁöÑ‰∫§Êòì„ÄÇÂõ†‰∏∫‰∫§ÊòìÊòØÂ≠òÂÇ®Âú®Âå∫Âùó‰∏≠ÁöÑÔºåÂÆÉËø≠‰ª£Âå∫ÂùóÈìæ‰∏≠ÁöÑÊØè‰∏Ä‰∏™Âå∫ÂùóÂêåÊó∂Ê£ÄÊü•ÈáåÈù¢ÁöÑÊØè‰∏Ä‰∏™‰∫§Êòì„ÄÇÂú®2017Âπ¥9Êúà18Êó•ÊòØÔºåÊØîÁâπÂ∏Å‰∏≠Â∞±Â∑≤ÁªèÊúâ485,860‰∏™Âå∫Âùó‰∫ÜÔºåÊï¥‰∏™Êï∞ÊçÆÂ∫ì‰ΩøÁî®‰∫Ü140+GbÁöÑÁ£ÅÁõòÁ©∫Èó¥„ÄÇËøôÊÑèÂë≥ÁùÄ‰∏Ä‰∏™‰∫∫ÈúÄË¶ÅËøêË°åÊï¥‰∏™ËäÇÁÇπÂéªÈ™åËØÅ‰∫§Êòì„ÄÇÊ≠§Â§ñÔºåÈ™åËØÅ‰∫§ÊòìÈúÄË¶ÅËø≠‰ª£ÂæàÂ§öÂå∫Âùó„ÄÇ</p>
<p>Ëøô‰∏™ÈóÆÈ¢òÁöÑËß£ÂÜ≥ÊñπÊ°àÂ∞±ÊòØÔºåÂè™‰∏∫Â≠òÂÇ®ÁöÑÊú™Ëä±Ë¥πÂá∫Ë¥¶Âª∫Á´ã‰∏Ä‰∏™Á¥¢ÂºïÔºåËøôÂ∞±ÊòØUTXOÈõÜÂêàÊâÄÂÅöÁöÑ‰∫ãÊÉÖÔºöËøôÂ∞±ÊòØ‰∏Ä‰∏™‰ªéÊâÄÊúâÂå∫ÂùóÈìæ‰∫§Êòì‰∏≠ÊâÄÂª∫Á´ãÁöÑ‰∏Ä‰∏™È´òÈÄüÁºìÂ≠òÔºàÈÄöËøáËø≠‰ª£ÊâÄÊúâÂå∫ÂùóÔºåÊòØÁöÑÔºå‰ΩÜÊòØÂè™ÈúÄË¶ÅÂÅö‰∏ÄÊ¨°ÔºâÔºåÂú®ÂêéÈù¢‰πüÁî®Ëøô‰∏™Êù•ËÆ°ÁÆó‰ΩôÈ¢ù‰ª•ÂèäÈ™åËØÅÊñ∞ÁöÑ‰∫§Êòì„ÄÇ2017Âπ¥9ÊúàÁöÑÊó∂ÂÄôÔºåUTXOÈõÜÂêàÈúÄË¶ÅÂ§ßÊ¶Ç2.7Gb„ÄÇ</p>
<p>Â•ΩÁöÑÔºåËÆ©Êàë‰ª¨ÊÉ≥ÊÉ≥Êàë‰ª¨ÂÆûÁé∞UTXOÈõÜÂêàÁöÑËØùÈúÄË¶ÅÂÅöÂì™‰∫õÊîπÂèò„ÄÇÁõÆÂâçÔºå‰∏ãÈù¢ÁöÑÂáΩÊï∞ÊòØÁî®Êù•ÂØªÊâæ‰∫§ÊòìÁöÑÔºö</p>
<ol>
<li><code>Blockchain.FindUnspentTransactions</code> - ‰∏ªË¶ÅÂäüËÉΩÊòØÂØªÊâæÂê´ÊúâÊú™Ëä±Ë¥π‰∫§ÊòìËæìÂá∫ÁöÑ‰∫§Êòì„ÄÇËøôÊòØÈÅçÂéÜÊâÄÊúâÂå∫ÂùóÁöÑÂú∞Êñπ„ÄÇ</li>
<li><code>Blockchain.FindSpendableOutputs</code> - Ëøô‰∏™ÂáΩÊï∞Âú®‰∏Ä‰∏™Êñ∞ÁöÑ‰∫§ÊòìË¢´ÂàõÂª∫Êó∂Ë¢´‰ΩøÁî®„ÄÇÂ¶ÇÊûúÊâæÂà∞ÁöÑÊï∞È¢ùË∂≥Â§üÂá∫Ë¥¶ÁöÑÈúÄÊ±Ç„ÄÇ‰ΩøÁî®<code>Blockchain.FindUnspentTransactions</code>„ÄÇ</li>
<li><code>Blockchain.FindUTXO</code> - ‰∏∫‰∏Ä‰∏™ÂÖ¨Èí•ÂìàÂ∏åÂØªÊâæÊú™Ëä±Ë¥π‰∫§ÊòìËæìÂá∫ÔºåÁî®Êù•Ëé∑Âèñ‰ΩôÈ¢ù„ÄÇ‰ΩøÁî®‰∫Ü<code>Blockchain.FindUnspentTransactions</code>„ÄÇ</li>
<li><code>Blockchain.FindTransaction</code> - ÈÄöËøá‰∏Ä‰∏™‰∫§ÊòìÁöÑIDÂú®Âå∫ÂùóÈìæ‰∏≠ÂØªÊâæËøô‰∏™‰∫§Êòì„ÄÇÂÆÉËø≠‰ª£ÊâÄÊúâÂå∫ÂùóÂéªÁõ¥Ëá≥ÊâæÂà∞ÂÆÉ„ÄÇ</li>
</ol>
<p>Ê≠£Â¶Ç‰Ω†ÊâÄÁúãÂà∞ÁöÑÔºåÊâÄÊúâÁöÑÊñπÊ≥ïÈÉΩËø≠‰ª£‰∫ÜÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊâÄÊúâÂå∫Âùó„ÄÇ‰ΩÜÊòØÊàë‰ª¨Áé∞Âú®‰∏çËÉΩÊîπËøõÂÆÉ‰ª¨ÔºåÂõ†‰∏∫UTXOÈõÜÂêàÊ≤°ÊúâÂ≠òÂÇ®ÊâÄÊúâÁöÑ‰∫§ÊòìÔºå‰ªÖ‰ªÖÂ≠òÂÇ®‰∫ÜÈÇ£‰∫õÂåÖÂê´Êú™Ëä±Ë¥π‰∫§ÊòìËæìÂá∫ÁöÑ„ÄÇÂõ†Ê≠§ÔºåÂÆÉ‰∏çËÉΩË¢´Áî®‰∫é<code>Blockchain.FindTransaction</code>„ÄÇ</p>
<p>ÊâÄ‰ª•ÔºåÊàë‰ª¨ÈúÄË¶Å‰∏ãÈù¢ÁöÑËøô‰∫õÊñπÊ≥ïÔºö</p>
<ol>
<li><code>Blockchain.FindUTXO</code> - ÈÄöËøáËø≠‰ª£Âå∫ÂùóÂØªÊâæÊâÄÊúâÁöÑÊú™Ëä±Ë¥πÂá∫Ë¥¶„ÄÇ</li>
<li><code>UTXOSet.Reindex</code> - ‰ΩøÁî®<code>FindUTXO</code>ÂéªÂØªÊâæÊú™Ëä±Ë¥πÂá∫Ë¥¶ÔºåÂπ∂‰∏îÂ∞ÜÂÆÉ‰ª¨Â≠òÂÇ®Âà∞Êï∞ÊçÆÂ∫ì‰∏≠„ÄÇËøôÂÑøÂ∞±ÊòØ‰∫ßÁîüÁºìÂ≠òÁöÑÂú∞Êñπ„ÄÇ</li>
<li><code>UTXOSet.FindSpendableOutputs</code> - Ëøô‰∏™ÊñπÊ≥ïÊ®°‰ªø‰∫Ü<code>Blockchain.FindSpendableOutputs</code>ÊñπÊ≥ïÔºåÂè™‰∏çËøá‰ΩøÁî®‰∫ÜUTXOÈõÜÂêà„ÄÇ</li>
<li><code>UTXOSet.FindUTXO</code> - Ëøô‰∏™ÊñπÊ≥ïÊ®°‰ªø‰∫Ü<code>Blockchain.FindUTXO</code>ÊñπÊ≥ïÔºåÂêåÊ†∑ÁöÑÂè™‰∏çËøá‰ΩøÁî®ÁöÑÊòØUTXOÈõÜÂêà„ÄÇ</li>
<li><code>Blockchain.FindTransaction</code>Âíå‰πãÂâçÁöÑ‰∏ÄÊ†∑„ÄÇ</li>
</ol>
<p>Âõ†Ê≠§ÔºåÊúÄÂ∏∏‰ΩøÁî®ÁöÑ‰∏§‰∏™ÂáΩÊï∞Â∞Ü‰ªéÁé∞Âú®Ëµ∑‰ΩøÁî®Âà∞È´òÈÄüÁºìÂ≠òÔºÅ</p>
<p>ËÆ©Êàë‰ª¨ÂºÄÂßãcodingÔºÅ</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">UTXOSet</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Blockchain</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Blockchain</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Êàë‰ª¨Â∞Ü‰ºö‰ΩøÁî®‰∏Ä‰∏™ÂçïÁã¨ÁöÑÊï∞ÊçÆÂ∫ìÔºå‰ΩÜÊòØÊàë‰ª¨Â∞Ü‰ºöÊääUTXOÈõÜÂêàÂ≠òÂÇ®Âà∞‰∏Ä‰∏™‰∏çÂêåÁöÑ<code>bucket</code>Èáå„ÄÇÂõ†Ê≠§Ôºå<code>UTXO</code>ÊòØÂíå<code>Blockchain</code>ÊàêÂØπÁöÑ„ÄÇ</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">u</span> <span style="color:#a6e22e">UTXOSet</span>) <span style="color:#a6e22e">Reindex</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">db</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">u</span>.<span style="color:#a6e22e">Blockchain</span>.<span style="color:#a6e22e">db</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">bucketName</span> <span style="color:#f92672">:=</span> []byte(<span style="color:#a6e22e">utxoBucket</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">Update</span>(<span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">tx</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">bolt</span>.<span style="color:#a6e22e">Tx</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">tx</span>.<span style="color:#a6e22e">DeleteBucket</span>(<span style="color:#a6e22e">bucketName</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">tx</span>.<span style="color:#a6e22e">CreateBucket</span>(<span style="color:#a6e22e">bucketName</span>)
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">UTXO</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">u</span>.<span style="color:#a6e22e">Blockchain</span>.<span style="color:#a6e22e">FindUTXO</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">Update</span>(<span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">tx</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">bolt</span>.<span style="color:#a6e22e">Tx</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">b</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">tx</span>.<span style="color:#a6e22e">Bucket</span>(<span style="color:#a6e22e">bucketName</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">txID</span>, <span style="color:#a6e22e">outs</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">UTXO</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">hex</span>.<span style="color:#a6e22e">DecodeString</span>(<span style="color:#a6e22e">txID</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Put</span>(<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">outs</span>.<span style="color:#a6e22e">Serialize</span>())
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Ëøô‰∏™ÊñπÊ≥ïÂàõÂª∫‰∫Ü‰∏Ä‰∏™ÂéüÂßãÁöÑUTXOÈõÜÂêà„ÄÇÈ¶ñÂÖàÔºåÂ¶ÇÊûúÂÆÉÂ≠òÂú®‰∏Ä‰∏™<code>bucket</code>ÁöÑËØùËÆ≤È¶ñÂÖàÂ∞ÜÂÆÉÁßªÈô§ÔºåÁÑ∂Âêé‰ªéÂå∫ÂùóÈìæ‰∏äÂØªÊâæÊâÄÊúâÁöÑÊú™Ëä±Ë¥π‰∫§ÊòìËæìÂá∫ÔºåÊúÄÂêéÂ∞ÜËøô‰∫õÂá∫Ë¥¶Â≠òÂÇ®Âà∞<code>bucket</code>Èáå„ÄÇ</p>
<p><code>Blockchain.FindUTXO</code>ÊñπÊ≥ïÂá†‰πéÂíå<code>Blockchain.FindUnspentTransactions</code>ÊòØÁõ∏ÂêåÁöÑÔºå‰ΩÜÊòØÁé∞Âú®ÂÆÉËøîÂõû‰∏Ä‰∏™<code>TransactionID </code>Âà∞<code>TransactionOutputs</code>ÁöÑ<code>Map</code>ÔºàÊò†Â∞ÑÔºâÁªìÊûÑ„ÄÇ</p>
<p>Áé∞Âú®ÔºåUTXOÈõÜÂêàÂèØ‰ª•Ë¢´Áî®Êù•ÂèëÈÄÅÂ∏ÅÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">u</span> <span style="color:#a6e22e">UTXOSet</span>) <span style="color:#a6e22e">FindSpendableOutputs</span>(<span style="color:#a6e22e">pubkeyHash</span> []<span style="color:#66d9ef">byte</span>, <span style="color:#a6e22e">amount</span> <span style="color:#66d9ef">int</span>) (<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>][]<span style="color:#66d9ef">int</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">unspentOutputs</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>][]<span style="color:#66d9ef">int</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">accumulated</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">db</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">u</span>.<span style="color:#a6e22e">Blockchain</span>.<span style="color:#a6e22e">db</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">View</span>(<span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">tx</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">bolt</span>.<span style="color:#a6e22e">Tx</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">b</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">tx</span>.<span style="color:#a6e22e">Bucket</span>([]byte(<span style="color:#a6e22e">utxoBucket</span>))
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">c</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Cursor</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">k</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">First</span>(); <span style="color:#a6e22e">k</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span>; <span style="color:#a6e22e">k</span>, <span style="color:#a6e22e">v</span> = <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Next</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">txID</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">hex</span>.<span style="color:#a6e22e">EncodeToString</span>(<span style="color:#a6e22e">k</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">outs</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">DeserializeOutputs</span>(<span style="color:#a6e22e">v</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">outIdx</span>, <span style="color:#a6e22e">out</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">outs</span>.<span style="color:#a6e22e">Outputs</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">IsLockedWithKey</span>(<span style="color:#a6e22e">pubkeyHash</span>) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">accumulated</span> &lt; <span style="color:#a6e22e">amount</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">accumulated</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">Value</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">unspentOutputs</span>[<span style="color:#a6e22e">txID</span>] = append(<span style="color:#a6e22e">unspentOutputs</span>[<span style="color:#a6e22e">txID</span>], <span style="color:#a6e22e">outIdx</span>)
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">accumulated</span>, <span style="color:#a6e22e">unspentOutputs</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ÊàñËÄÖÁî®Êù•Êü•ËØ¢‰ΩôÈ¢ùÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">u</span> <span style="color:#a6e22e">UTXOSet</span>) <span style="color:#a6e22e">FindUTXO</span>(<span style="color:#a6e22e">pubKeyHash</span> []<span style="color:#66d9ef">byte</span>) []<span style="color:#a6e22e">TXOutput</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">UTXOs</span> []<span style="color:#a6e22e">TXOutput</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">db</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">u</span>.<span style="color:#a6e22e">Blockchain</span>.<span style="color:#a6e22e">db</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">View</span>(<span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">tx</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">bolt</span>.<span style="color:#a6e22e">Tx</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">b</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">tx</span>.<span style="color:#a6e22e">Bucket</span>([]byte(<span style="color:#a6e22e">utxoBucket</span>))
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">c</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Cursor</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">k</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">First</span>(); <span style="color:#a6e22e">k</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span>; <span style="color:#a6e22e">k</span>, <span style="color:#a6e22e">v</span> = <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Next</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">outs</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">DeserializeOutputs</span>(<span style="color:#a6e22e">v</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">out</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">outs</span>.<span style="color:#a6e22e">Outputs</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">IsLockedWithKey</span>(<span style="color:#a6e22e">pubKeyHash</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">UTXOs</span> = append(<span style="color:#a6e22e">UTXOs</span>, <span style="color:#a6e22e">out</span>)
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">UTXOs</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Ëøô‰∫õÊòØÂØπ‰∫éÁõ∏Â∫îÁöÑ<code>Blockchain</code>ÊñπÊ≥ïÁõ∏Â∫îÁöÑÂæÆÊîπÁöÑÁâàÊú¨„ÄÇËøô‰∫õ<code>Blockchain</code>ÊñπÊ≥ï‰∏çÂÜçÈúÄË¶Å‰∫Ü„ÄÇ</p>
<p>Êã•ÊúâUTXOÈõÜÂêàÊÑèÂë≥ÁùÄÊàë‰ª¨Êï∞ÊçÆÔºà‰∫§ÊòìÔºâÊòØÂàÜÂºÄÂéªÂ≠òÂÇ®ÁöÑÔºöÂÆûÈôÖ‰∏ä‰∫§ÊòìÊòØÂ≠òÂÇ®Âú®Âå∫ÂùóÈìæ‰∏≠ÁöÑÔºåÂêåÊó∂Êú™Ëä±Ë¥π‰∫§ÊòìËæìÂá∫ÊòØÂ≠òÂÇ®Âú®UTXOÈõÜÂêà‰∏≠„ÄÇËøôÊ†∑ÁöÑÂàÜÂºÄÔºàÂ≠òÂÇ®ÔºâÈúÄË¶ÅÂæàÂº∫ÁöÑÂêåÊ≠•Êú∫Âà∂ÔºåÂõ†‰∏∫Êàë‰ª¨ÊÉ≥Ë¶ÅUTXOÈõÜÂêàÊÄªÊòØË¢´Êõ¥Êñ∞ÂêåÊó∂Â≠òÂÇ®ÊúÄËøëÁöÑ‰∫§ÊòìÂá∫Ë¥¶„ÄÇ‰ΩÜÊòØÊàë‰ª¨‰∏çÊÉ≥Âú®ÊØèÊ¨°Êñ∞ÂùóË¢´ÊåñÂá∫ÁöÑÊó∂ÂÄôÈáçÂª∫Á¥¢ÂºïÔºåÂõ†‰∏∫Êàë‰ª¨Ë¶ÅÈÅøÂÖçÁöÑÊ≠£ÊòØËøôÁßçÈ¢ëÁπÅÁöÑÂå∫ÂùóÈìæÊâ´Êèè„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨ÈúÄË¶Å‰∏Ä‰∏™Êõ¥Êñ∞UTXOÈõÜÂêàÁöÑÊú∫Âà∂Ôºö</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">u</span> <span style="color:#a6e22e">UTXOSet</span>) <span style="color:#a6e22e">Update</span>(<span style="color:#a6e22e">block</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Block</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">db</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">u</span>.<span style="color:#a6e22e">Blockchain</span>.<span style="color:#a6e22e">db</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">Update</span>(<span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">tx</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">bolt</span>.<span style="color:#a6e22e">Tx</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">b</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">tx</span>.<span style="color:#a6e22e">Bucket</span>([]byte(<span style="color:#a6e22e">utxoBucket</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">tx</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">block</span>.<span style="color:#a6e22e">Transactions</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">tx</span>.<span style="color:#a6e22e">IsCoinbase</span>() <span style="color:#f92672">==</span> <span style="color:#66d9ef">false</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">vin</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">tx</span>.<span style="color:#a6e22e">Vin</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">updatedOuts</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">TXOutputs</span>{}
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">outsBytes</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Get</span>(<span style="color:#a6e22e">vin</span>.<span style="color:#a6e22e">Txid</span>)
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">outs</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">DeserializeOutputs</span>(<span style="color:#a6e22e">outsBytes</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">outIdx</span>, <span style="color:#a6e22e">out</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">outs</span>.<span style="color:#a6e22e">Outputs</span> {
</span></span><span style="display:flex;"><span>                        <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">outIdx</span> <span style="color:#f92672">!=</span> <span style="color:#a6e22e">vin</span>.<span style="color:#a6e22e">Vout</span> {
</span></span><span style="display:flex;"><span>                            <span style="color:#a6e22e">updatedOuts</span>.<span style="color:#a6e22e">Outputs</span> = append(<span style="color:#a6e22e">updatedOuts</span>.<span style="color:#a6e22e">Outputs</span>, <span style="color:#a6e22e">out</span>)
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">updatedOuts</span>.<span style="color:#a6e22e">Outputs</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Delete</span>(<span style="color:#a6e22e">vin</span>.<span style="color:#a6e22e">Txid</span>)
</span></span><span style="display:flex;"><span>                    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Put</span>(<span style="color:#a6e22e">vin</span>.<span style="color:#a6e22e">Txid</span>, <span style="color:#a6e22e">updatedOuts</span>.<span style="color:#a6e22e">Serialize</span>())
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">newOutputs</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">TXOutputs</span>{}
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">out</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">tx</span>.<span style="color:#a6e22e">Vout</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">newOutputs</span>.<span style="color:#a6e22e">Outputs</span> = append(<span style="color:#a6e22e">newOutputs</span>.<span style="color:#a6e22e">Outputs</span>, <span style="color:#a6e22e">out</span>)
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Put</span>(<span style="color:#a6e22e">tx</span>.<span style="color:#a6e22e">ID</span>, <span style="color:#a6e22e">newOutputs</span>.<span style="color:#a6e22e">Serialize</span>())
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Ëøô‰∏™ÂáΩÊï∞ÁúãËµ∑Êù•ÊØîËæÉÂ∫ûÂ§ßÔºå‰ΩÜÊòØÂÆÉÊâÄÂÅöÁöÑÊòØÈùûÂ∏∏Áõ¥Êé•ÁöÑ„ÄÇÂΩì‰∏Ä‰∏™Êñ∞ÁöÑÂå∫ÂùóË¢´ÊåñÂá∫Êù•Êó∂ÔºåËøô‰∏™UTXOÈõÜÂêàÂ∫îËØ•Ë¢´Êõ¥Êñ∞„ÄÇÊõ¥Êñ∞ÊÑèÂë≥ÁùÄÁßªÈô§Â∑≤Ëä±Ë¥πÂá∫Ë¥¶ÔºåÂêåÊó∂Ê∑ªÂä†‰ªéÊñ∞ÊåñÂá∫ÁöÑ‰∫§Êòì‰∏≠ÊâÄÂæóÂà∞ÁöÑÊú™Ëä±Ë¥πËæìÂá∫„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™Âá∫Ë¥¶Ë¢´ÁßªÈô§ÁöÑ‰∫§Êòì‰∏≠Ôºå‰∏çÂÜçÂåÖÂê´ÂÖ∂‰ªñÁöÑÂá∫Ë¥¶ÔºåÂÆÉÂ∞±Ë¢´ÂÆåÂÖ®ÁßªÈô§‰∫Ü„ÄÇÈùûÂ∏∏ÁÆÄÂçïÔºÅ</p>
<p>Áé∞Âú®ËÆ©Êàë‰ª¨Âú®ÂøÖË¶ÅÁöÑÂú∞Êñπ‰ΩøÁî®UTXOÈõÜÂêàÂêßÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">cli</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">CLI</span>) <span style="color:#a6e22e">createBlockchain</span>(<span style="color:#a6e22e">address</span> <span style="color:#66d9ef">string</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">bc</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">CreateBlockchain</span>(<span style="color:#a6e22e">address</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">bc</span>.<span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">Close</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">UTXOSet</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">UTXOSet</span>{<span style="color:#a6e22e">bc</span>}
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">UTXOSet</span>.<span style="color:#a6e22e">Reindex</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>‰∏Ä‰∏™Á¥¢ÂºïÁöÑÈáçÂª∫ÂèëÁîüÂú®‰∏Ä‰∏™Êñ∞ÁöÑÂå∫ÂùóÈìæË¢´ÂàõÂª∫Êó∂„ÄÇ‰æãÂ¶ÇÁé∞Âú®ÔºåËøôÈáåÂè™Êúâ‰∏Ä‰∏™Âú∞ÊñπÁî®Âà∞<code>Reindex</code>ÔºåËôΩÁÑ∂ÁúãËµ∑Êù•Êúâ‰∫õÂ§ö‰ΩôÂú®ËøôÈáåÔºåÂõ†‰∏∫Âú®Âå∫ÂùóÈìæÁöÑÂºÄÂßãÂè™Êúâ‰∏Ä‰∏™Âå∫ÂùóÂ∏¶Êúâ‰∏Ä‰∏™‰∫§ÊòìÔºåÂêåÊó∂ÂèØ‰ª•Áî®<code>Update</code>ÂéªÊõøÊç¢ÂÆÉ„ÄÇ‰ΩÜÊòØÊàë‰ª¨ÂèØËÉΩÈúÄË¶ÅËøô‰∏™ÈáçÂª∫Á¥¢ÂºïÊú∫Âà∂Âú®‰ª•Âêé„ÄÇÔºàËã±ËØ≠ÁöÑËØ≠Ë®ÄÁªÑÁªáËßÑÂàôÊÄé‰πàÊúâÁÇπÂÉèÂ±±‰∏úËØùÂïäÊàëËßâÂæó&hellip;ÁúãÁúãÂèØ‰ª•ÁøªËØëÊàê‰∏≠ÂºèÂÄíË£ÖËøô‰∏™Âè•Â≠ê&hellip;Ôºâ</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">cli</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">CLI</span>) <span style="color:#a6e22e">send</span>(<span style="color:#a6e22e">from</span>, <span style="color:#a6e22e">to</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">amount</span> <span style="color:#66d9ef">int</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">newBlock</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">bc</span>.<span style="color:#a6e22e">MineBlock</span>(<span style="color:#a6e22e">txs</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">UTXOSet</span>.<span style="color:#a6e22e">Update</span>(<span style="color:#a6e22e">newBlock</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ÁÑ∂ÂêéUTXOÈõÜÂêàÂú®Êñ∞ÁöÑÂå∫ÂùóË¢´ÊåñÂá∫ÂêéÊõ¥Êñ∞Ôºö</p>
<p>ËÆ©Êàë‰ª¨Ê£ÄÊü•‰∏Ä‰∏ãÂÆÉÁöÑÂ∑•‰ΩúÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span> <span style="color:#a6e22e">blockchain_go</span> <span style="color:#a6e22e">createblockchain</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">address</span> <span style="color:#ae81ff">1</span><span style="color:#a6e22e">JnMDSqVoHi4TEFXNw5wJ8skPsPf4LHkQ1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">000000</span><span style="color:#ae81ff">86</span><span style="color:#a6e22e">a725e18ed7e9e06f1051651a4fc46a315a9d298e59e57aeacbe0bf73</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Done</span>!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span> <span style="color:#a6e22e">blockchain_go</span> <span style="color:#a6e22e">send</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">from</span> <span style="color:#ae81ff">1</span><span style="color:#a6e22e">JnMDSqVoHi4TEFXNw5wJ8skPsPf4LHkQ1</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">to</span> <span style="color:#ae81ff">12</span><span style="color:#a6e22e">DkLzLQ4B3gnQt62EPRJGZ38n3zF4Hzt5</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">amount</span> <span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">0000001</span><span style="color:#a6e22e">f75cb3a5033aeecbf6a8d378e15b25d026fb0a665c7721a5bb0faa21b</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Success</span>!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span> <span style="color:#a6e22e">blockchain_go</span> <span style="color:#a6e22e">send</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">from</span> <span style="color:#ae81ff">1</span><span style="color:#a6e22e">JnMDSqVoHi4TEFXNw5wJ8skPsPf4LHkQ1</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">to</span> <span style="color:#ae81ff">12</span><span style="color:#a6e22e">ncZhA5mFTTnTmHq1aTPYBri4jAK8TacL</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">amount</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">000000</span><span style="color:#a6e22e">cc51e665d53c78af5e65774a72fc7b864140a8224bf4e7709d8e0fa433</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Success</span>!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span> <span style="color:#a6e22e">blockchain_go</span> <span style="color:#a6e22e">getbalance</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">address</span> <span style="color:#ae81ff">1</span><span style="color:#a6e22e">JnMDSqVoHi4TEFXNw5wJ8skPsPf4LHkQ1</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Balance</span> <span style="color:#a6e22e">of</span> <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#ae81ff">1</span><span style="color:#a6e22e">F4MbuqjcuJGymjcuYQMUVYB37AWKkSLif</span><span style="color:#960050;background-color:#1e0010">&#39;</span>: <span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span> <span style="color:#a6e22e">blockchain_go</span> <span style="color:#a6e22e">getbalance</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">address</span> <span style="color:#ae81ff">12</span><span style="color:#a6e22e">DkLzLQ4B3gnQt62EPRJGZ38n3zF4Hzt5</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Balance</span> <span style="color:#a6e22e">of</span> <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#ae81ff">1</span><span style="color:#a6e22e">XWu6nitBWe6J6v6MXmd5rhdP7dZsExbx</span><span style="color:#960050;background-color:#1e0010">&#39;</span>: <span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span> <span style="color:#a6e22e">blockchain_go</span> <span style="color:#a6e22e">getbalance</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">address</span> <span style="color:#ae81ff">12</span><span style="color:#a6e22e">ncZhA5mFTTnTmHq1aTPYBri4jAK8TacL</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Balance</span> <span style="color:#a6e22e">of</span> <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#ae81ff">13</span><span style="color:#a6e22e">UASQpCR8Nr41PojH8Bz4K6cmTCqweskL</span><span style="color:#960050;background-color:#1e0010">&#39;</span>: <span style="color:#ae81ff">4</span>
</span></span></code></pre></div><p>Â•ΩÂô¢ÔºÅËøô‰∏™<code>1JnMDSqVoHi4TEFXNw5wJ8skPsPf4LHkQ1</code>Âú∞ÂùÄÊé•Âèó‰∫Ü‰∏âÊ¨°Â•ñÂä±Ôºö</p>
<ol>
<li>‰∏ÄÊ¨°Êù•Ëá™ÊåñÂá∫Âàõ‰∏ñÁ∫™Âùó„ÄÇ</li>
<li>‰∏ÄÊ¨°Êù•Ëá™ÊåñÂá∫Âå∫Âùó<code>0000001f75cb3a5033aeecbf6a8d378e15b25d026fb0a665c7721a5bb0faa21b</code>„ÄÇ</li>
<li>‰∏ÄÊ¨°Êù•Ëá™ÊåñÂá∫Âå∫Âùó<code>000000cc51e665d53c78af5e65774a72fc7b864140a8224bf4e7709d8e0fa433</code>„ÄÇ</li>
</ol>
<h2 id="merkle-treeÈªòÂÖãÂ∞îÊ†ë">Merkle TreeÔºàÈªòÂÖãÂ∞îÊ†ëÔºâ</h2>
<p>ËøôÈáåÊúâ‰∏Ä‰∏™ÊúÄÂ•ΩÁöÑÊú∫Âà∂ÊàëÊÉ≥Âú®ËøôÈÉ®ÂàÜËÆ®ËÆ∫‰∏Ä‰∏ã„ÄÇ</p>
<p>Ê≠£Â¶ÇÊàë‰ª¨‰∏äÊñáÊâÄËØ¥ÁöÑÔºåÂÖ®ÈÉ®ÁöÑÊØîÁâπÂ∏ÅÊï∞ÊçÆÂ∫ìÔºàÊàñËÄÖËØ¥Âå∫ÂùóÈìæÔºâ‰ΩøÁî®‰∫ÜË∂ÖËøá140GbÁöÑÁ£ÅÁõòÁ©∫Èó¥„ÄÇÁî±‰∫éÊØîÁâπÂ∏ÅÂéª‰∏≠ÂøÉÂåñÁöÑÁâπÊÄßÔºåÁΩëÁªú‰∏≠ÁöÑÊØè‰∏™ËäÇÁÇπÂøÖÈ°ªÁã¨Á´ãÂíåËá™ÁªôËá™Ë∂≥Ôºå‰πüÂ∞±ÊòØËØ¥ÊØè‰∏™ËäÇÁÇπÂøÖÈ°ªÂ≠òÂÇ®Êï¥‰∏™Âå∫ÂùóÈìæÁöÑÂâØÊú¨„ÄÇÈöèÁùÄÊõ¥Â§öÁöÑ‰∫∫ÂºÄÂßã‰ΩøÁî®ÊØîÁâπÂ∏ÅÔºåËøô‰∏™ËßÑÂàôÂèòÂæóÂæàÈöæÂéªÈÅµÂÆàÔºöÊ≤°ÊúâÂèØËÉΩÊØè‰∏™‰∫∫ÈÉΩÂéªËøêË°åÂÖ®ËäÇÁÇπ„ÄÇÂêåÊó∂ÔºåÁî±‰∫éËäÇÁÇπÊòØÁΩëÁªúÁöÑÊàêÁÜüÁöÑÂèÇ‰∏éËÄÖÔºåÂÆÉ‰ª¨Êã•ÊúâË¥£‰ªªÔºöÂÆÉ‰ª¨ÂøÖÈ°ªÈ™åËØÅ‰∫§ÊòìÂíåÂå∫Âùó„ÄÇÂêåÊó∂ÔºåÂÆÉ‰ª¨ÈúÄË¶ÅÊúâÁ°ÆÂàáÁöÑ‰∫íËÅîÁΩëÊµÅÈáèÊù•‰∏éÂÖ∂‰ªñËäÇÁÇπËøõË°å‰∫§‰∫íÂπ∂‰∏î‰∏ãËΩΩÊñ∞ÁöÑÂå∫Âùó„ÄÇ</p>
<p>Âú®‰∏≠Êú¨ËÅ™ÂèëÂ∏ÉÁöÑ<a class="link" href="https://bitcoin.org/bitcoin.pdf"  target="_blank" rel="noopener"
    >ÊØîÁâπÂ∏ÅÂéüÂßãËÆ∫Êñá</a>‰∏≠ÔºåÂØπËøô‰∏™ÈóÆÈ¢òÊúâ‰∏Ä‰∏™Ëß£ÂÜ≥ÊñπÊ°àÔºöÁÆÄÂçïÊîØ‰ªòÈ™åËØÅÔºàSimplified Payment Verification SPVÔºâ„ÄÇSPVÊòØ‰∏Ä‰∏™ËΩªËäÇÁÇπÔºå‰∏çÈúÄË¶Å‰∏ãËΩΩÂÖ®ÈÉ®ÁöÑÂå∫ÂùóÈìæ‰πü‰∏çÈúÄË¶ÅÂØπÂå∫ÂùóÂíå‰∫§ÊòìËøõË°åÈ™åËØÅ„ÄÇÂèñËÄå‰ª£‰πãÔºåÂÆÉÂú®Âå∫Âùó‰∏≠ÂØªÊâæ‰∫§ÊòìÔºàÁî®Êù•È™åËØÅÊîØ‰ªòÔºâÂêåÊó∂ËøûÊé•Âà∞‰∏Ä‰∏™ÂÖ®ËäÇÁÇπÊ£ÄÁ¥¢ÂøÖË¶ÅÁöÑÊï∞ÊçÆÔºà‰πüÂ∞±ÊòØËØ¥ËΩªËäÇÁÇπÈúÄË¶ÅÊüê‰∫õÊï∞ÊçÆÊó∂ÔºåÂèØ‰ª•‰ªéËøûÊé•ÂÖ®ËäÇÁÇπÔºåÂú®‰∏äÈù¢‰∏ãËΩΩÔºâ„ÄÇËøô‰∏™Êú∫Âà∂ÂÖÅËÆ∏Â§ö‰∏™ËΩªÈí±ÂåÖËäÇÁÇπÂè™ËøêË°å‰∏Ä‰∏™ÂÖ®ËäÇÁÇπ„ÄÇ</p>
<p>‰∏∫‰∫ÜËÆ©SPVÊàê‰∏∫ÂèØËÉΩÔºåËøôÂ∞±Â∫îËØ•Êúâ‰∏ÄÁßçÊ£ÄÊü•‰∏Ä‰∏™Âå∫ÂùóÊòØÂê¶ÂåÖÂê´ÁâπÂÆöÁöÑ‰∫§ÊòìËÄå‰∏çÁî®‰∏ãËΩΩÊï¥‰∏™Âå∫ÂùóÁöÑÊñπÊ≥ï„ÄÇËøôÂ∞±ÊòØMerkleÊ†ëÊâÄÂÅöÁöÑ„ÄÇ</p>
<p>MerkleÊ†ëË¢´ÊØîÁâπÂ∏ÅÁî®Êù•Ëé∑Âèñ‰∫§ÊòìÁöÑÂìàÂ∏åÔºå‰πüÂ∞±ÊòØ‰πãÂêéÂ≠òÂÇ®Âú®Âå∫ÂùóÂ§¥Âπ∂‰∏îË¢´Â∑•‰ΩúÈáèËØÅÊòéÊâÄËÄÉËôëÂà∞„ÄÇÁõ¥Âà∞Áé∞Âú®ÔºåÊàë‰ª¨‰ªÖ‰ªÖËøûÊé•‰∫ÜÂå∫Âùó‰∏≠ÊØè‰∏™‰∫§ÊòìÁöÑÂìàÂ∏åÁÑ∂ÂêéÂØπÂÆÉ‰ª¨‰ΩøÁî®<code>SHA-256</code>ÊñπÊ≥ï„ÄÇËøô‰πüÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÊñπÂºèÊù•Ëé∑ÂèñÂå∫Âùó‰∫§ÊòìÁöÑÁã¨‰∏ÄÊó†‰∫åÁöÑÁâπÂæÅÂÄºÔºå‰ΩÜÊòØÊ≤°ÊúâMerkleÊ†ëÁöÑ‰ºòÂäø„ÄÇ</p>
<p>ËÆ©Êàë‰ª¨ÁúãÁúãMerkleÊ†ëÔºö</p>
<p><img src="https://i.loli.net/2019/09/19/QlatOoLygwCJM4E.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>‰∏Ä‰∏™MerkleÊ†ëÊòØ‰∏∫ÊØè‰∏Ä‰∏™Âå∫ÂùóÂª∫Á´ãÁöÑÔºåÂÆÉ‰ªéÂè∂ËäÇÁÇπÂºÄÂßãÔºàÊ†ëÁöÑÂ∫ïÈÉ®ÔºâÔºå‰∏Ä‰∏™Âè∂Â≠êÊòØ‰∏Ä‰∏™‰∫§ÊòìÂìàÂ∏åÔºàÊØîÁâπÂ∏Å‰ΩøÁî®ÂèåÈáç<code>SHA256</code>ÂìàÂ∏åÁÆóÊ≥ïÔºâ„ÄÇÂè∂ËäÇÁÇπÁöÑÊï∞ÁõÆÊØîÂøÖÈ°ªÊòØÂÅ∂Êï∞Ôºå‰ΩÜÊòØÂπ∂‰∏çÊòØÊØè‰∏Ä‰∏™Âå∫ÂùóÈÉΩÂåÖÂê´ÂÅ∂Êï∞‰∏™Êï∞ÁöÑ‰∫§Êòì„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™Âå∫ÂùóÁöÑ‰∫§ÊòìÊï∞ÊòØÂ•áÊï∞ÔºåÈÇ£‰πàÊúÄÂêé‰∏Ä‰∏™‰∫§ÊòìÂ∞Ü‰ºöË¢´Â§çÂà∂ÔºàÂú®MerkleÊ†ë‰∏≠Ôºå‰∏çÊòØÂå∫Âùó‰∏≠ÔºÅÔºâ„ÄÇ</p>
<p>Á¶ªÂºÄÂ∫ïÈÉ®ÔºåÂè∂ËäÇÁÇπÊàêÂØπÊàêÁªÑÔºåÂÆÉ‰ª¨ÁöÑÂìàÂ∏åË¢´ËøûÊé•ÔºåÂêåÊó∂‰∏Ä‰∏™Êñ∞ÁöÑÂìàÂ∏å‰ªéÂÆÉ‰ª¨Áõ∏ËøûÁöÑÂìàÂ∏åÂæóÂà∞„ÄÇÊñ∞ÁöÑÂìàÂ∏åÁªÑÊàêÊñ∞ÁöÑÊ†ëËäÇÁÇπ„ÄÇËøô‰∏™Ê≠•È™§Ë¢´ÈáçÂ§çÊâßË°åÁõ¥Ëá≥‰ªÖÂâ©‰∏Ä‰∏™ËäÇÁÇπÔºåÂè´ÂÅöÊ†ëÁöÑÊ†πËäÇÁÇπ„ÄÇËøô‰∏™Ê†πÂìàÂ∏åË¢´Áî®ÂÅöËøô‰∫õ‰∫§ÊòìÁöÑÁã¨‰∏ÄÊó†‰∫åÁöÑÁâπÂæÅ‰ª£Ë°®ÔºåË¢´Â≠òÂÇ®Âú®Âå∫ÂùóÂ§¥‰∏≠ÔºåÁî®‰∫éÂ∑•‰ΩúÈáèËØÅÊòéÁ®ãÂ∫è„ÄÇ</p>
<p>ÊúÄÂêéÔºåÂÜô‰ª£Á†ÅÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">MerkleTree</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">RootNode</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">MerkleNode</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">MerkleNode</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Left</span>  <span style="color:#f92672">*</span><span style="color:#a6e22e">MerkleNode</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Right</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">MerkleNode</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Data</span>  []<span style="color:#66d9ef">byte</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Êàë‰ª¨‰ªéÁªìÊûÑ‰ΩìÂºÄÂßã„ÄÇÊØè‰∏Ä‰∏™<code>MerkleNode</code>ÔºàMerkleËäÇÁÇπÔºâÁª¥ÊåÅÊï∞ÊçÆÂπ∂‰∏îËøûÊé•Âà∞ÂàÜÊîØ‰∏ä„ÄÇ<code>MerkleNode</code>ÊòØÁúüÊ≠£ÁöÑËøûÊé•Âà∞‰∏ã‰∏Ä‰∏™ËäÇÁÇπÁöÑÊ†πËäÇÁÇπÔºåÂèàËøûÊé•Âà∞Êõ¥ËøúÁöÑËäÇÁÇπ„ÄÇ</p>
<p>ËÆ©Êàë‰ª¨È¶ñÂÖàÂàõÂª∫‰∏Ä‰∏™ËäÇÁÇπÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewMerkleNode</span>(<span style="color:#a6e22e">left</span>, <span style="color:#a6e22e">right</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">MerkleNode</span>, <span style="color:#a6e22e">data</span> []<span style="color:#66d9ef">byte</span>) <span style="color:#f92672">*</span><span style="color:#a6e22e">MerkleNode</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">mNode</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">MerkleNode</span>{}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">left</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">right</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">hash</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">sha256</span>.<span style="color:#a6e22e">Sum256</span>(<span style="color:#a6e22e">data</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">mNode</span>.<span style="color:#a6e22e">Data</span> = <span style="color:#a6e22e">hash</span>[:]
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">prevHashes</span> <span style="color:#f92672">:=</span> append(<span style="color:#a6e22e">left</span>.<span style="color:#a6e22e">Data</span>, <span style="color:#a6e22e">right</span>.<span style="color:#a6e22e">Data</span><span style="color:#f92672">...</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">hash</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">sha256</span>.<span style="color:#a6e22e">Sum256</span>(<span style="color:#a6e22e">prevHashes</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">mNode</span>.<span style="color:#a6e22e">Data</span> = <span style="color:#a6e22e">hash</span>[:]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">mNode</span>.<span style="color:#a6e22e">Left</span> = <span style="color:#a6e22e">left</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">mNode</span>.<span style="color:#a6e22e">Right</span> = <span style="color:#a6e22e">right</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">mNode</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ÊØè‰∏™ËäÇÁÇπÂåÖÂê´‰∏Ä‰∫õÊï∞ÊçÆ„ÄÇÂΩì‰∏Ä‰∏™ËäÇÁÇπÊòØÂè∂Â≠êÊó∂ÔºåÊï∞ÊçÆÂú®Â§ñÁïåËé∑ÂæóÔºàÊàë‰ª¨ÁöÑÂÆû‰æã‰∏≠ÊòØÂ∫èÂàóÂåñÁöÑ‰∫§ÊòìÔºâ„ÄÇÂΩì‰∏Ä‰∏™ËäÇÁÇπËøûÊé•Âà∞Âè¶‰∏Ä‰∏™ËäÇÁÇπÊó∂ÔºåÂÆÉËé∑ÂèñÂÆÉ‰ª¨ÁöÑÊï∞ÊçÆÂπ∂‰∏îËøûÊé•ÂÆÉ‰ª¨ÁÑ∂ÂêéËøõË°åÂìàÂ∏åËøêÁÆó„ÄÇ</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewMerkleTree</span>(<span style="color:#a6e22e">data</span> [][]<span style="color:#66d9ef">byte</span>) <span style="color:#f92672">*</span><span style="color:#a6e22e">MerkleTree</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">nodes</span> []<span style="color:#a6e22e">MerkleNode</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">data</span>)<span style="color:#f92672">%</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">data</span> = append(<span style="color:#a6e22e">data</span>, <span style="color:#a6e22e">data</span>[len(<span style="color:#a6e22e">data</span>)<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">datum</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">data</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">node</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewMerkleNode</span>(<span style="color:#66d9ef">nil</span>, <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">datum</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">nodes</span> = append(<span style="color:#a6e22e">nodes</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">node</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; len(<span style="color:#a6e22e">data</span>)<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">newLevel</span> []<span style="color:#a6e22e">MerkleNode</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">j</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">j</span> &lt; len(<span style="color:#a6e22e">nodes</span>); <span style="color:#a6e22e">j</span> <span style="color:#f92672">+=</span> <span style="color:#ae81ff">2</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">node</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewMerkleNode</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">nodes</span>[<span style="color:#a6e22e">j</span>], <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">nodes</span>[<span style="color:#a6e22e">j</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>], <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">newLevel</span> = append(<span style="color:#a6e22e">newLevel</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">node</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">nodes</span> = <span style="color:#a6e22e">newLevel</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">mTree</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">MerkleTree</span>{<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">nodes</span>[<span style="color:#ae81ff">0</span>]}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">mTree</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ÂΩì‰∏Ä‰∏™Êñ∞ÁöÑÊ†ëË¢´ÂàõÂª∫ÔºåÁ¨¨‰∏Ä‰ª∂‰∫ãÂ∞±ÊòØÁ°ÆÂÆöÊòØÂê¶ÊòØÂÅ∂Êï∞‰∏™Âè∂Â≠ê„ÄÇÂú®ÈÇ£‰πãÂêéÔºåÊï∞ÊçÆÔºà‰∏Ä‰∏™Â∫èÂàóÂåñ‰∫§ÊòìÊï∞ÁªÑÔºâË¢´‰º†ÂÖ•Ê†ëÂè∂Â≠êÔºåÁÑ∂ÂêéÊ†ëÂºÄÂßãÁî±Ëøô‰∫õÂè∂Â≠êÁîüÈïø„ÄÇ</p>
<p>Áé∞Âú®ÔºåËÆ©Êàë‰ª¨‰øÆÊîπ<code>Block.HashTransactions</code>ÔºåÂú®Â∑•‰ΩúÈáèËØÅÊòé‰∏≠Ë¢´‰ΩøÁî®Êù•Ëé∑Âèñ‰∫§ÊòìÂìàÂ∏åÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">b</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Block</span>) <span style="color:#a6e22e">HashTransactions</span>() []<span style="color:#66d9ef">byte</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">transactions</span> [][]<span style="color:#66d9ef">byte</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">tx</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Transactions</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">transactions</span> = append(<span style="color:#a6e22e">transactions</span>, <span style="color:#a6e22e">tx</span>.<span style="color:#a6e22e">Serialize</span>())
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">mTree</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewMerkleTree</span>(<span style="color:#a6e22e">transactions</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">mTree</span>.<span style="color:#a6e22e">RootNode</span>.<span style="color:#a6e22e">Data</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>È¶ñÂÖàÔºå‰∫§ÊòìË¢´Â∫èÂàóÂåñÔºà‰ΩøÁî®<code>encoding/gob</code>ÔºâÔºåÁÑ∂ÂêéÂÆÉ‰ª¨Ë¢´Áî®Êù•ÊûÑÂª∫MerkleÊ†ë„ÄÇÊ†ëÁöÑÊ†πËäÇÁÇπË¢´‰Ωú‰∏∫Ëøô‰∫õÂå∫Âùó‰∫§ÊòìÁöÑÁã¨‰∏ÄÊó†‰∫åÁöÑÊ†áËØÜÊù•Â≠òÂÇ®„ÄÇ</p>
<h2 id="p2kh">P2KH</h2>
<blockquote>
<p>ËøôÈÉ®ÂàÜÁõ∏ÂΩì‰∫éÊâ©Â±ïÂÜÖÂÆπÔºåÊúâÂÖ≥ÊØîÁâπÂ∏ÅÁöÑËÑöÊú¨ËØ≠Ë®Ä„ÄÇÊàëÂ•ΩÂõ∞Â•ΩÊÉ≥Áù°~Â∞±ÂÖàËΩ¨AnnatarHeÁöÑ‰∫Ü„ÄÇ</p>
</blockquote>
<p>Âú®ÁªÜËäÇ‰∏äËøòÊúâ‰∏ÄÁÇπË¶ÅËØ¥‰∏Ä‰∏ã„ÄÇ</p>
<p>‰Ω†ËÆ∞ÂæóÂêóÔºåÂú®ÊØîÁâπÂ∏ÅÁßçÊúâ‰∏ÄÁßçËÑöÊú¨(<em>Script</em>)ÁºñÁ®ãËØ≠Ë®ÄÔºåÂÆÉË¢´Áî®Êù•ÈîÅÂÆö‰∫§ÊòìÂá∫Ë¥¶Ôºö‰∫§ÊòìÂÖ•Ë¥¶Êèê‰æõÊï∞ÊçÆÂéªÈîÅÂÆöÂá∫Ë¥¶„ÄÇËøô‰∏™ËØ≠Ë®ÄÈùûÂ∏∏ÁÆÄÂçïÔºåËØ≠Ë®ÄÁöÑ‰ª£Á†Å‰πüÂ∞±‰ªÖ‰ªÖÊòØÊï∞ÊçÆÂíåÊìç‰ΩúÁ¨¶ÁöÑÊéíÂàóËÄåÂ∑≤„ÄÇÁúã‰∏ãËøô‰∏™‰æãÂ≠êÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#ae81ff">5</span> <span style="color:#ae81ff">2</span> OP_ADD <span style="color:#ae81ff">7</span> OP_EQUAL
</span></span></code></pre></div><p><strong>5</strong>, <strong>2</strong>, Âíå <strong>7</strong> ÈÉΩÊòØÊï∞ÊçÆ. <strong>OP_ADD</strong> Âíå <strong>OP_EQUAL</strong> ÊòØÊìç‰ΩúÁ¨¶„ÄÇ<em>Script</em> ÁöÑ‰ª£Á†ÅÊòØ‰ªéÂ∑¶Ëá≥Âè≥ÊâßË°åÁöÑÔºöÊï∞ÊçÆÁöÑÊØè‰∏ÄÂùóÈÉΩË¢´Â°ûËøõÊ†àÈáåÁÑ∂Âêé‰∏ã‰∏™Êìç‰Ωú‰ºö‰ºöË¢´Ê†àÈ°∂ÁöÑÂÖÉÁ¥†Ë∞ÉÁî®„ÄÇ<em>Script</em>ÁöÑÊ†àÂè™ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑ FILO(ÂÖàÂÖ•ÂêéÂá∫)ÂÜÖÂ≠òÂ≠òÂÇ®ÔºöÊ†à‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ËøõÂéªÁöÑÂÖÉÁ¥†‰ºöË¢´ÊúÄÂêé‰∏Ä‰∏™ÊãøËµ∞Ôºå‰πãÂêéËøõÊù•ÁöÑÊØè‰∏™ÂÖÉÁ¥†ÈÉΩÊòØÊîæÂà∞Ââç‰∏Ä‰∏™ÁöÑ‰∏äÈù¢„ÄÇ</p>
<p>Êù•ÂàÜËß£‰∏Ä‰∏ã‰∏äÈù¢Ëøô‰∏™ËÑöÊú¨ÊâßË°åÁöÑÊ≠•È™§ÂêßÔºö</p>
<ol>
<li>Ê†àÔºöÁ©∫„ÄÇËÑöÊú¨Ôºö<strong>5 2 OP_ADD 7 OP_EQUAL</strong></li>
<li>Ê†àÔºö<strong>5</strong>„ÄÇËÑöÊú¨Ôºö<strong>2 OP_ADD 7 OP_EQUAL</strong></li>
<li>Ê†àÔºö<strong>5 2</strong>„ÄÇËÑöÊú¨Ôºö<strong>OP_ADD 7 OP_EQUAL</strong></li>
<li>Ê†àÔºö<strong>7</strong>„ÄÇËÑöÊú¨Ôºö<strong>7 OP_EQUAL</strong></li>
<li>Ê†àÔºö<strong>7 7</strong>„ÄÇËÑöÊú¨Ôºö<strong>OP_EQUAL</strong></li>
<li>Ê†àÔºö<strong>true</strong>„ÄÇËÑöÊú¨ÔºöÁ©∫</li>
</ol>
<p><strong>OP_ADD</strong>ÊãøËµ∞Ê†à‰∏äÁöÑ‰∏§‰∏™ÂÖÉÁ¥†ÔºåÊ±ÇÂíåÔºåÁÑ∂ÂêéÊääÂíåÂÜçÂ°ûËøõÊ†àÈáå„ÄÇ<strong>OP_EQUAL</strong>‰ªéÊ†àÈáåÊãø‰∏§‰∏™ÂÖÉÁ¥†ÔºåÁÑ∂ÂêéÊØîËæÉÔºö Â¶ÇÊûú‰∏ÄÊ†∑Â∞±Êää<strong>true</strong> Êé®Âà∞Ê†àÈáåÔºå‰∏ç‰∏ÄÊ†∑Â∞±Êää<strong>false</strong>Êé®ËøõÂéª„ÄÇËÑöÊú¨ÊâßË°åÁöÑÁªìÊûúÂ∞±ÊòØÊ†àÈ°∂ÁöÑÂÄºÔºöÂú®Êàë‰ª¨ÁöÑÂú∫ÊôØ‰∏ãÔºåÂÆÉÊòØ <strong>true</strong>ÔºåËøôÂ∞±ÊÑèÂë≥ÁùÄËÑöÊú¨Ê≠£Â∏∏Âú∞ÊàêÂäüÊâßË°å‰∫Ü„ÄÇ</p>
<p>Áé∞Âú®Êù•Áúã‰∏ÄÁúºÊØîÁâπÂ∏Å‰∏≠ÊâßË°åÊîØ‰ªòÁöÑËÑöÊú¨Ôºö</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>&lt;signature&gt; &lt;pubKey&gt; OP_DUP OP_HASH160 &lt;pubKeyHash&gt; OP_EQUALVERIFY OP_CHECKSIG
</span></span></code></pre></div><p>Ëøô‰∏™ËÑöÊú¨Ë¢´Áß∞‰Ωú<em>‰ªòÊ¨æÁªôÂÖ¨Èí•ÂìàÂ∏å(Pay to Public Key Hash)</em>(P2PKH)ÔºåËøôÊòØÊØîÁâπÂ∏Å‰∏≠ÊúÄÂ∏∏Áî®ÁöÑËÑöÊú¨„ÄÇÂÆÉÂ∞±ÊòØÂ≠óÈù¢‰∏äÁöÑÁªôÂÖ¨Èí•ÂìàÂ∏å‰ªòÊ¨æÁöÑÊÑèÊÄùÔºåÂÆÉ‰ºöÁî®‰∏Ä‰∏™Á°ÆÂÆöÁöÑÂÖ¨Èí•ÈîÅÂ∏Å„ÄÇËøôÊòØ <strong>ÊØîÁâπÂ∏ÅÊîØ‰ªòÁöÑÊ†∏ÂøÉ</strong>ÔºöÊó†Ë¥¶Êà∑Ôºå‰∏§ËÄÖ‰πãÈó¥Êó†ËµÑÈáë‰∫§‰∫íÔºõÂè™ÊúâËÑöÊú¨ÂéªÁ°ÆËÆ§Êèê‰æõÁöÑÊï∞Â≠óÁ≠æÂêçÂíåÂÖ¨Èí•ÊòØÊ≠£Á°ÆÁöÑ„ÄÇ</p>
<p>Ê≠§ËÑöÊú¨ÂÆûË¥®‰∏äÂ≠òÂú®‰∏§‰∏™ÈÉ®ÂàÜÔºö</p>
<ol>
<li>Á¨¨‰∏ÄÂùó„ÄÇ<strong>signature</strong>, <strong>pubKey</strong>Â≠òÂú®ÂÖ•Ë¥¶ÁöÑ <strong>ScriptSig</strong> Â≠óÊÆµ‰∏≠„ÄÇ</li>
<li>Á¨¨‰∫åÈÉ®ÂàÜ„ÄÇ<strong>OP_DUP OP_HASH160 pubKeyHash OP_EQUALVERIFY OP_CHECKSIG</strong>Â≠òÂú®Âá∫Ë¥¶ÁöÑ <strong>ScriptPubKey</strong> ‰∏≠„ÄÇ</li>
</ol>
<p>ÊâÄ‰ª•ÔºåÂÆÉÊòØÂÆö‰πâËß£ÈîÅÈÄªËæëÁöÑÂá∫Ë¥¶Ôºå‰πüÊòØÊèê‰æõÊï∞ÊçÆÂå∫Ëß£ÈîÅÂá∫Ë¥¶ÁöÑÂÖ•Ë¥¶„ÄÇÊù•ÊâßË°å‰ª•‰∏ãËøô‰∏™ËÑöÊú¨Ôºö</p>
<p>1 Ê†à: empty ËÑöÊú¨: signature pubKey OP_DUP OP_HASH160 pubKeyHash OP_EQUALVERIFY OP_CHECKSIG</p>
<p>2 Ê†à: signature ËÑöÊú¨: pubKey OP_DUP OP_HASH160 pubKeyHash OP_EQUALVERIFY OP_CHECKSIG</p>
<p>3 Ê†à: signature pubKey ËÑöÊú¨: OP_DUP OP_HASH160 pubKeyHash OP_EQUALVERIFY OP_CHECKSIG</p>
<p>4 Ê†à: signature pubKey pubKey ËÑöÊú¨: OP_HASH160 pubKeyHash OP_EQUALVERIFY OP_CHECKSIG</p>
<p>5 Ê†à: signature pubKey pubKeyHash ËÑöÊú¨: pubKeyHash OP_EQUALVERIFY OP_CHECKSIG</p>
<p>6 Ê†à: signature pubKey pubKeyHash pubKeyHash ËÑöÊú¨: OP_EQUALVERIFY OP_CHECKSIG</p>
<p>7 Ê†à: signature pubKey ËÑöÊú¨: OP_CHECKSIG</p>
<p>8 Ê†à: <strong>true</strong> Êàñ <strong>false</strong>. Script: empty.</p>
<p><strong>OP_DUP</strong> Â§çÂà∂Ê†àÈ°∂ÁöÑ‰∏Ä‰∏™ÂÖÉÁ¥†. <strong>OP_HASH160</strong> ÊãøËµ∞Ê†àÈ°∂ÁöÑÂÖÉÁ¥†ÔºåÂπ∂Áî® <strong>RIPEMD160</strong> ÂìàÂ∏å‰∏Ä‰∏ã; ÂÜçÊääÁªìÊûúÂ°ûÂà∞Ê†àÈáå. <strong>OP_EQUALVERIFY</strong> ÂØπÊØîÊ†àÈ°∂ÁöÑ‰∏§‰∏™ÂÖÉÁ¥†ÔºåÂ¶ÇÊûú‰∏ç‰∏ÄÊ†∑Â∞±‰∏≠Êñ≠ËÑöÊú¨ÁöÑÊâßË°å. <strong>OP_CHECKSIG</strong> ÈÄöËøáÂìàÂ∏å‰∫§ÊòìÔºåËøòÊúâ <strong>signature</strong> Âíå <strong>pubKey</strong> Êù•È™åËØÅ‰∫§ÊòìÁöÑÁ≠æÂêç. ÂêéÈù¢ÁöÑ‰∏Ä‰∏™Êìç‰ΩúÈ¢á‰∏∫Â§çÊùÇ: ÂÆÉÂÅö‰∫Ü‰∏Ä‰∏™ÁÆÄÁâàÁöÑ‰∫§ÊòìÂâØÊú¨, ÂØπÂÆÉÂìàÂ∏å(Âõ†‰∏∫ËøôÊòØË¢´Á≠æÂêçÁöÑ‰∫§ÊòìÂìàÂ∏å), ÁÑ∂ÂêéÁî®Êèê‰æõÁöÑ <strong>signature</strong> Âíå <strong>pubKey</strong> È™åËØÅÁ≠æÂêç.</p>
<p>Êúâ‰∫ÜËøôÊ†∑ÁöÑËÑöÊú¨ËØ≠Ë®ÄÂ∞±ÂÖÅËÆ∏ÊØîÁâπÂ∏ÅÂèØ‰ª•Êàê‰∏∫Êô∫ËÉΩÂêàÁ∫¶Âπ≥Âè∞ÔºöËøôÁßçËØ≠Ë®ÄÊòØÁöÑÈô§‰∫ÜÁ©øË°£Âçï‰∏™ÁßòÈí•‰πãÂ§ñÁöÑÂÖ∂‰ªñ‰∫§ÊòìÊñπÂºèÊàê‰∏∫‰∫ÜÂèØËÉΩ„ÄÇ</p>
<h2 id="ÊÄªÁªì">ÊÄªÁªì</h2>
<p>Â•ΩÂï¶ÔºÅÊàë‰ª¨Âá†‰πéÂÆûÁé∞‰∫Ü‰ª•Âå∫ÂùóÈìæ‰∏∫Âü∫Á°ÄÁöÑÂä†ÂØÜË¥ßÂ∏ÅÁöÑÊâÄÊúâÂÖ≥ÈîÆÁâπÊÄß„ÄÇÊàë‰ª¨Êúâ‰∫ÜÂå∫ÂùóÈìæ„ÄÅÂú∞ÂùÄ„ÄÅÊåñÁüø‰ª•Âèä‰∫§Êòì„ÄÇ‰ΩÜÊòØËøòÊúâ‰∏Ä‰ª∂‰∫ãËµã‰∫àËøô‰∫õÊâÄÊúâÊú∫Âà∂ÁîüÂëΩÔºå‰ΩøÂå∫ÂùóÈìæÊàê‰∏∫‰∏Ä‰∏™ÂÖ®Â±ÄÁîüÊÄÅÔºö‰∏ÄËá¥ÊÄß„ÄÇÂú®‰∏ã‰∏ÄÁØáÊñáÁ´†‰∏≠ÔºåÊàë‰ª¨Â∞ÜÂºÄÂßãÂÆûÁé∞Âå∫ÂùóÈìæÁöÑ‚ÄúÂéª‰∏≠ÂøÉÂåñ‚ÄùÈÉ®ÂàÜ„ÄÇÂ∞ΩËØ∑ÊúüÂæÖÔºÅ</p>
<p>Links:</p>
<ol>
<li><a class="link" href="https://github.com/Jeiwan/blockchain_go/tree/part_6"  target="_blank" rel="noopener"
    >Full source codes</a></li>
<li><a class="link" href="https://en.bitcoin.it/wiki/Bitcoin_Core_0.11_%28ch_2%29:_Data_Storage#The_UTXO_set_.28chainstate_leveldb.29"  target="_blank" rel="noopener"
    >The UTXO Set</a></li>
<li><a class="link" href="https://en.bitcoin.it/wiki/Protocol_documentation#Merkle_Trees"  target="_blank" rel="noopener"
    >Merkle Tree</a></li>
<li><a class="link" href="https://en.bitcoin.it/wiki/Script"  target="_blank" rel="noopener"
    >Script</a></li>
<li><a class="link" href="https://github.com/sipa/bitcoin/commit/450cbb0944cd20a06ce806e6679a1f4c83c50db2"  target="_blank" rel="noopener"
    >‚ÄúUltraprune‚Äù Bitcoin Core commit</a></li>
<li><a class="link" href="https://statoshi.info/dashboard/db/unspent-transaction-output-set"  target="_blank" rel="noopener"
    >UTXO set statistics</a></li>
<li><a class="link" href="https://medium.com/@maraoz/smart-contracts-and-bitcoin-a5d61011d9b1"  target="_blank" rel="noopener"
    >Smart contracts and Bitcoin</a></li>
<li><a class="link" href="https://medium.com/@jonaldfyookball/why-every-bitcoin-user-should-understand-spv-security-520d1d45e0b9"  target="_blank" rel="noopener"
    >Why every Bitcoin user should understand ‚ÄúSPV security‚Äù</a></li>
</ol>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/golang/">Golang</a>
        
            <a href="/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/">Âå∫ÂùóÈìæ</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"integrity="sha256-J&#43;iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s="crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js"integrity="sha256-InsNdER1b2xUewP&#43;pKCUJpkhiqwHgqiPXDlIk7GzBu4="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js"integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI="crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ]
        });})
</script>
    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Áõ∏ÂÖ≥ÊñáÁ´†</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/%E4%BD%BF%E7%94%A8golang%E6%9E%84%E5%BB%BA%E5%8C%BA%E5%9D%97%E9%93%BEpart5%E5%9C%B0%E5%9D%80/">
        
        

        <div class="article-details">
            <h2 class="article-title">‰ΩøÁî®GolangÊûÑÂª∫Âå∫ÂùóÈìæPart5ÔºöÂú∞ÂùÄ</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/%E4%BD%BF%E7%94%A8golang%E6%9E%84%E5%BB%BA%E5%8C%BA%E5%9D%97%E9%93%BEpart4%E4%BA%A4%E6%98%93-1/">
        
        

        <div class="article-details">
            <h2 class="article-title">‰ΩøÁî®GolangÊûÑÂª∫Âå∫ÂùóÈìæPart4Ôºö‰∫§Êòì-1</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/%E4%BD%BF%E7%94%A8golang%E6%9E%84%E5%BB%BA%E5%8C%BA%E5%9D%97%E9%93%BEpart3%E6%8C%81%E4%B9%85%E5%8C%96%E5%92%8C%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%8E%A5%E5%8F%A3/">
        
        

        <div class="article-details">
            <h2 class="article-title">‰ΩøÁî®GolangÊûÑÂª∫Âå∫ÂùóÈìæPart3ÔºöÊåÅ‰πÖÂåñÂíåÂëΩ‰ª§Ë°åÊé•Âè£</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/%E4%BD%BF%E7%94%A8golang%E6%9E%84%E5%BB%BA%E5%8C%BA%E5%9D%97%E9%93%BEpart2%E5%B7%A5%E4%BD%9C%E9%87%8F%E8%AF%81%E6%98%8E/">
        
        

        <div class="article-details">
            <h2 class="article-title">‰ΩøÁî®GolangÊûÑÂª∫Âå∫ÂùóÈìæPart2ÔºöÂ∑•‰ΩúÈáèËØÅÊòé</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/%E4%BD%BF%E7%94%A8golang%E6%9E%84%E5%BB%BA%E5%8C%BA%E5%9D%97%E9%93%BEpart1%E5%9F%BA%E6%9C%AC%E5%8E%9F%E5%9E%8B/">
        
        

        <div class="article-details">
            <h2 class="article-title">‰ΩøÁî®GolangÊûÑÂª∫Âå∫ÂùóÈìæPart1ÔºöÂü∫Êú¨ÂéüÂûã</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2018 - 
        
        2023 Li Duo
    </section>
    
    <section class="powerby">
        
            Ëá™ËÆ§‰∏∫ÊòØÂπªË±°Ê≥¢ÊôÆÊòüÁöÑÊù•ÂÆ¢ <br/>
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        ‰∏ªÈ¢ò <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.16.0">Stack</a></b> Áî± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ËÆæËÆ°
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
